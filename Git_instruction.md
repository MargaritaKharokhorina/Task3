# Работа с Git

## 1. Проверка наличия установленного Git
В терминале выполнить команду `git version`.
Если Git установлен, появится сообщение с информацией о версии программы. Иначе будет сообщение об ошибке.

## 2. Установка Git
Загружаем последнюю версию Git с сайта 
https://git-scm.com/downloads
Устанавливаем с настройками по умолчанию.

## 3. Настройка Git
При первом использовании Git необходимо представиться. Для этого ввести в терминале две команды:
```
git config --global user.name "Имя пользователя"
git config --global user.email "почта@pochta.com"
```
## 4. Инициализация репозитория
Для создания нового репозитория используется команда `git init`. Она выполняется **один раз** для первоначальной настройки нового репозитория.

Также можно склонировать существующий репозиторий Git из любого места: `git clone <адрес репозитория>`.

## 5. Запись изменений в репозиторий
Состояние рабочего каталога и раздела проиндексированных файлов отображает команда `git status`. Сообщение *'working tree clean'* означает, что Git не обнаружил неотслеживаемых файлов, иначе они были бы перечислены. 

**Первой командой для сохранения** текущего состояния проекта является `git add`. Когда `git add` используется как отдельная команда, она переносит ожидающие изменения из рабочего каталога в раздел проиндексированных файлов.

Снимок локальных файлов, записанный в локальный репозиторий делает команда `git commit`. 
```
git commit -m "commit text" - коммитит все добавленные файлы
git commit -a -m (or -am) "commit text" - добавляет и коммитит все отслеживаемые файлы
```
С помощью команды `git diff` сравниваются источники данных Git - коммиты, ветки, файлы и т. д.

## 6. Просмотр истории коммитов
Журнал изменений представляет собой команда `git log`. По умолчанию она перечисляет коммиты, сделанные в репозитории, в обратном к хронологическому порядке.

## 7. Перемещение между сохранениями
Для вызова какой-то версии проекта используется команда `git checkout`. 

**Важно:** после переключения между разными версиями для возвращения к актуальному состоянию необходимо использовать `git checkout master`.

## 8. Создание ветки в Git
Чтобы создать новую ветку, необходимо выполнить команду `git branch`. Знак звездочки (*) у названия новой ветки означает, что сейчас вы находитесь на ней. Для перехода на ветку используйте `git checkout branch_name`.

Возможности управления ветками гораздо шире, они рассмотрены ниже.  
## 9. Управление ветками
Добавление информации из созданных веток, например, в основную - master происходит за счет команды `git merge branch_name`. Эта команда вызывается оттуда, куда вы хотите добавить изменения. 

После слияния можно удалить ту ветку, которая больше не интересует: `git branch -d branch_name`. При этом если в какую-то ветку внесены измнения и они не слиты с основной, то при попытке удаления этой ветки выйдет ошибка. Программа предложит вовсе удалить ее через команду `git branch -D branch_name`. Прописная **D** указывает на принудительное удаление ветки, в которой есть неслитая информация. 

Кроме того, программа не позволит и переместиться между ветками (через `git checkout branch_name`), если есть несохраненные изменения, поэтому сперва нужно зафиксировать их. 

## 10. Конфликты при работе с ветками
Конфликт может возникнуть во время слияния веток, когда предлагаемые для команды `git merge` изменения уже имеются в другой ветке (или подобны им). Программа предлагает решить конфликт четырьмя способами:
* Accept Current Change - принять текущую версию
* Accept Incoming Change - принять ту версию, которая к вам пришла
* Accept Both - оставить оба варианта
* Compare Changes - сравнить изменения

![Варианты решения конфликта, плюс четвертый - Compare Changes](problem.png)

После устранения конфликта, когда сделали выбор способа его решения, если вызвать `git status`, программа покажет неслитые изменения. Поэтому **необходимо вновь произвести команду `git merge`**. 
## 11. Игнорирование файлов в Git
Некоторые файлы (например, изображения) Git помечает как неостлеживаемые и для того, чтобы программа постоянно не писала об этом, создайте новый файл **.gitignore**. В ней необходимо указать название будущего игнорируемого файла. Далее действуйте по обычному алгоритму: вызвать `git status`, совершить `git add .gitignore`, закоммитить и снова проверить статус.
## 12. Ветки: что же это и для чего?
Ветка в Git - это простой перемещаемый указатель на один из таких коммитов. Имя основной ветки по умолчанию **master**. При создании коммитов, эта ветка всегда будет указывать на последний коммит. 

Что же происходит при создании ветки? При запуске новой ветки с определенным именем создается новый указатель для дальнейшего перемещения. 

Использование веток позволяет оптимизировать работу над большими проектами. Например, одна ветка может быть основной для разработки, а если создается новый функционал, то запускается новая ветка под него. После окончания работы все добавления сливаются с основной веткой. 

## 13. Работа с удаленными репозиториями
Выше, в разделе 4, упомянута команда `git clone`, предназначенная для начала работы с удаленными репозиториями (клонирование уже существующего репозитория Git из любого места). Таким образом, удаленные - не значит, что их удалили, так назывывают репозитории, которые находятся не на нашем компьютере. Иными словами, - нелокальные. 

Работа с удаленными репозиториями выстраивается следующим образом: 
```
1. Создать аккаунт на GitHub
2. Создать локальный репозиторий
3. Создать удаленный репозиторий
4. Связать удаленный репозиторий с локальным
```

`git remote add <имя для репозитория> <адрес репозитория>` - добавление измененного репозитория к проекту; при вызове `git remote` с параметром `-v` будет выведен список закладок с именами и соотвествующими URL-адресами репозиториев 

`git pull` - получение и слияния изменений из удаленного репозитория (составная команда, так как не только сгружает все измнения, но и сливает ветки)

`git push` - отправление изменения локального репозитория в удаленный

**Важно**: команда `git push` требует авторизации, VS Code и ваш GitHub должны "подружиться" (это делается единожды).

По умолчанию GitHub предлагает переименовать основую ветку **master** в **main** через команду `git branch -m Main`.

## 14. Конфликт между локальным и удаленным репозиторием
Он возникает при команде `git pull`, если удаленно и локально есть похожая информация. В этом случае не происходит автоматического слияния, в связи с чем необходимо выполнить `git commit - m "Resolve conflict", выбрав из предложенных (или отредактировать вручную) путь разрешения конфликта. 

## 15. Запрос на вливание изменений  в чужой репозиторий
При желании по участвовать в каком-то проекте с ограниченным доступом сперва необходимо сделать свою отдельную копию этого репозитория - кнопка *Fork* на GitHub. Далее: *create fork*, скопировать код и добавить его в свою папку через команду `cd <имя файла>`. 

**Важно:** предложения по изменениям в чужом проекте всегда делаются в отдельной ветке, в которой должен храниться файл с описанием. Команда `git push` позволит предложить эти изменения владельцу(/ам) основного репозитория. 

На GitHub после этого появится кнопка *compare & pull request*. Именно **pull request** представляет собой запрос. Далее становится возможным *create pull request*. 

Если же кнопка *compare & pull request* не появилась, значит, необходимо сделать это вручную через *pull request*. 
